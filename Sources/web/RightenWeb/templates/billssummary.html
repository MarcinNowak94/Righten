{% extends 'layout.html' %}

{% block content %}
<div class="container">
    <div class="row">
    <div class="col-xs-10, col-sm-6">
        <div class="card card-style mb-2">
            <div class="card-body">
                <div class="chart-container" style="position: relative;">
                    <canvas id="BillsSummary"></canvas>
                </div>
            </div>
        </div>
    </div>
    <div class="col-xs-10, col-sm-6">
        <div class="card card-style mb-2">
            <div class="card-body">
                <div class="chart-container" style="position: relative;">
                    <canvas id="BillsOverTime"></canvas>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

    {% block javascript %}
        <script>
            let data = JSON.parse({{ data | tojson }})
            let labels = JSON.parse({{ labels | tojson }})
            let months = JSON.parse({{ months | tojson }})
            let amounts = JSON.parse({{ amounts | tojson }})
            
            let BillsSummarychart = new Chart(document.getElementById("BillsSummary"), {
                    type: 'pie',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: "Bills type",
                            data: data,
                            backgroundColor: ['#5DA5DA ', '#FAA43A', '#60BD68',
                                '#B276B2', '#E16851', '#FB8267'],
        
                            borderWidth: 1,
                            hoverBorderColor: "black",
                            hoverBorderWidth: 2,
                            hoverBackgroundColor: 'rgba(154, 245, 140)',
                            pointHoverRadius: 5
                        }]
                    },
                    options: {
                            title: {
                                display: true,
                                    text: "Bills type summary",
                                        fontSize: 20,
                            },
                            legend: {
                                position: "right",
                                    labels: {
                                    fontColor: "gray"
                                },
                                display: true
                            },
        
                            elements: {
                                hitRadius: 3,
                            }
                    }
                })
                
                //NICE-TO-HAVE: add option to divide by type
                let BillsOverTime = new Chart(document.getElementById("BillsOverTime"), {
                    type: "line",
                    data: {
                        labels: months,
                        datasets: [{
                            label: "Bills",
                            
                            data: amounts,
                            fill: false,
                            borderColor: "rgb(75, 192, 192)",
                            lineTension: 0.1
                        }]
                    }
                })

        </script>
    {% endblock %}
{% endblock %}